---
title: "Hedonic Pricing"
author: "Anthony Restivo"
date: "10/6/2025"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
# the line below makes sure to include your R source code in the knitted document
knitr::opts_chunk$set(echo = TRUE)

# the line below suppresses errors when knitting the document
knitr::opts_chunk$set(error = TRUE)

# the code below will round answers to 2 decimals and make sure output is not in scientific notation format
knitr::knit_hooks$set(inline = function(x) {
  x <- sprintf("%1.2f", x)
  paste(x, collapse = ", ")
})
options(scipen=999)
# clear environment and load in packages
rm(list=ls())

# load in some packages
library(wooldridge)
library(tidyverse)
library(stargazer)
```
<font size ="5">

***
## Q0
From the "Run" menu in R Studio (or using the hotkeys/shortcut if you know them), run all the chunks (Windows: CTRL+ALT+R)(	Mac: Cmd+Option+R).

Then, knit the document.
(Windows: CTRL+SHIFT+K)
(Mac: CMD + SHIFT + K)

***
## Q1
Load in the "hprice3" dataset from the package "Wooldridge" and assign it to a data frame named "df". (We could call it whatever we want, let's just pick df for the moment)

```{r}
df <- hprice3
?hprice3
```

## Q2
Read the variable descriptions in this data by running ?hprice3, take note of how the variables are defined.
```{r}
## uncomment the line below (remove the #) to run the help
?hprice3
```

***
## Q3

### Q3.a 
Plot a histogram of the housing prices.
```{r}
#histogram - uncomment to plot
qplot(df$price)
```

### Q3.b
Use descriptive statistics to calculate the mean values of: age, price, inst, rooms, area,land, baths.  

```{r}
df %>%
  select(age, price, inst, rooms, area, land, baths) %>%
  summary()

```

***
## Q4
Suppose we want to quantify how different characteristics of houses contribute to the price the house commands on the market. That is, we have an economic model of the following sort:

price = f(age, distance to highway, # rooms, sq. ft, lot size, #baths)

where f() is a function to be estimated.

### Q4.a

Place a positive (+) or negative(-) sign next to each independent variable indicating what you predict is the partial effect of that variable. If you are unsure, put "?"

Reminder: a partial effect is the effect of one independent variable on the dependent variable, while holding all other independent variables constant.

age of house: -

distance to highway: ?

\# rooms: +

sq. ft. : +

lot size: + 

\# baths: +

***
## Q5
Now translate your economic model into an econometric model by specifying the function f() that characterizes the relationship between house characteristics and the prices of the houses on the market.

$$price_i = \beta_0 + \beta_1 age_i + \beta_2 inst_i + \beta_3 rooms_i + \beta_4 sqft_i + \beta_5 land_i + \beta_6 baths_i + u_i$$

### Q5.a
Q: What kind of things does $u_i$ represent?
 
A: The error term ($u_i$) represents all unobserved determinants of the dependent variable. For example... in a big layout of houses for sale could include many factors such as weather, culture and jobs that are open.

### Q5.b
Q: What do we have to assume about the relationship between open houses our independent variables above?
A: We must assume there is no relationship between

### Q5.c
Q: What do we have to assume about the relationship between the independent variables?
A: We must assume no perfect multicollinearity (to be discussed in class)

***
## Q6.a
Estimate the regression specified in Q5, store the results as an object named "ols1". 

Then, estimate the model specified in Q5 without the control for the number of baths, store the results in "ols2".

Print the estimates of both models next to each other using stargazer.

```{r}
ols1 <- lm(price~age+inst+rooms+area+land+baths,data=df)

ols2 <- lm(price~age+inst+rooms+area+land,data=df)

stargazer(ols1,ols2,type="text")

```
### Q6.b
Q: Compare the estimated coefficient on rooms across the two models. Why are they different?

A: The variables aren't taken acre for as they should be accounted for. 

### Q6.c

Store the estimated coefficients from the "full" model ols1 in an object named "coef" or similar.

```{r}
coef <- summary(ols1)$coefficients[,1]

coef
```

***
## Q7 
Interpret your slope estimates from the model "ols1" (the full model in Q5).

### Q7.a

$$\widehat{\beta_1}= `r coef[2] ` $$

Interpretation:  All else equal, for every year older a house is, the price falls by \$ `r coef[2] %>% abs() `

### Q7.b
$$\widehat{\beta_2}= `r coefs[3] `  $$

Interpretation:   All else equal, for every 100 feet further from the interstate a house is, the price falls by \$ `r 100*coef[3] %>% abs()`.

### Q7.c
$$\widehat{\beta_3}=  $$

Interpretation: 


### Q7.d
$$\widehat{\beta_4}=  $$

Interpretation: 


### Q7.e
$$\widehat{\beta_5}= $$

Interpretation: 

### Q7.f

$$\widehat{\beta_6}=  $$

Interpretation: 

***
## Q8

Q: How much of the variation in housing prices in your sample is due to the differences in the characteristics included in your model?

```{r}
rsq <- summary(ols1)$r.squared
```
A: `r 100*rsq `% of the variation in housing prices is explained

***
## Q9
Q: What is the expected price of a 40 year old, 1800 square foot house located 5,000 feet from the interstate with 7 rooms, 2 of which are bathrooms, sitting on a 10,000 square foot lot?

```{r}
predicted_value<- data.frame(age=40, area=1800, inst=5000, rooms=7, baths=2, land=10000)

expected_price <- predict(ols1,predicted_value)

```
A: The expected price of a house with these characteristics is \$ `r expected_price `.

Q: What is the expected price of a house with characteristics all equal to their sample means?

Hint - use mean() inside of the data.frame command, for example: age=mean(df$age)
```{r}
mean(df$age)

expected_price <- predict(ols1,predicted_value)
```



```
A: 

</font>